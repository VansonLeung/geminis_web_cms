@model IEnumerable<WebApplication2.Models.ImageView>

@foreach (var image in Model)
{
    <a href="#" onclick="returnImage(event)" class="returnImage" data-url="@Request.Url.GetLeftPart(UriPartial.Authority)@image.Url">
        <img src="@image.Url" alt="Hejsan" id="#image" data-source="@image.Url" width="200" height="200" />
    </a>
}
<script type="text/javascript">
    var returnImage = function (e) {
        function getUrlParam(paramName) {
            var reParam = new RegExp('(?:[\?&]|&)' + paramName + '=([^&]+)', 'i');
            var match = window.location.search.match(reParam);

            return (match && match.length > 1) ? match[1] : null;
        }
        var urlImage = $(e.target).closest(".returnImage").attr("data-url");
        var funcNum = getUrlParam('CKEditorFuncNum');

        window.opener.CKEDITOR.tools.callFunction(funcNum, urlImage);
        window.close(); 
    }
</script>